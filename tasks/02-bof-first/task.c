#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <unistd.h>


int main(int argc, char *argv[]) {
  printf("Task 02 - First buffer overflow:\n");
  printf("---------------\n");
  fflush(NULL);
  volatile int x = 9;
  char buffer[16];
  memset(buffer,0, sizeof(buffer));
  init_visualize(buffer); 

  printf("Here is current stack: ");
  visualize(buffer);
  
  printf("Please fill the buffer (16 bytes) with text and change the value of secret variable from 9 to 88 (dec), so that the program flow changes:\n");
  fflush(NULL);
  gets(buffer);
  visualize(buffer);

  if(x == 88){
    printf("Sucess, you changed the program flow by overwriting variable on stack.\n");
    printf("Flag is yours:\n");
    fflush(NULL);
    system("cat ./flag");
    printf("\n");
  }
  else{
    printf("\nNothing happened. Try again.");
  }
  return 0;
}

