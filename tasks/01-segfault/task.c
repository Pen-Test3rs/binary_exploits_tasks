#include <stdlib.h>
#include <stdio.h>
#include <signal.h>

void segfault_handler(){
    puts("You raised segmentation fault and crashed the program.");
    puts("Here is your flag:");
    system("cat ./flag.txt");
    exit(1);
}

int main(int argc, char *argv[]) {
    setvbuf(stdout, NULL, _IONBF, 0);
    setvbuf(stdin, NULL, _IONBF, 0);

    signal(SIGSEGV, segfault_handler);

    char name[16];
    puts("Greeter:");
    puts("---------------");
    printf("Please enter your name: ");
    gets(name);
    printf("\nNice to meet you %s...\n", name);
    return 0;
}

